upstream login_upstream {
  server login:3000;
}

server {
  listen 80;
  server_name _;

  # Serve static HTML
  location / {
    root /usr/share/nginx/html;
    index index.html;
  }

  # Proxy /login to the login-service container
  location /login {
    proxy_pass http://login_upstream$request_uri;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
  }

  # Proxy /orders to the order-service container
  location /orders {
    proxy_pass http://order:3000/orders;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
  }

  # Proxy /inventory to the inventory-service container
  location /inventory {
    proxy_pass http://inventory:3000/inventory;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
  }
}
